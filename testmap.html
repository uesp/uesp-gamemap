<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Test GameMap</title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<link rel="stylesheet" href="gamemap.css" />
	<script type="text/javascript" src="jquery-1.10.2.js"></script>
	<script type="text/javascript" src="common.js"></script>
	<script type="text/javascript" src="bounds.js"></script>
	<script type="text/javascript" src="mapoptions.js"></script>
	<script type="text/javascript" src="mapstate.js"></script>
	<script type="text/javascript" src="location.js"></script>
	<script type="text/javascript" src="world.js"></script>
	<script type="text/javascript" src="maptile.js"></script>
	<script type="text/javascript" src="gamemap.js"></script>
	<script type="text/javascript">

		var g_GameMap = null;
		var g_MapState = null;
		
		var g_SRMapOptions = {
				mapContainer : "#gmMap",
				getMapTileFunction : getSkyrimMapTile,
				missingMapTile:  "http://content3.uesp.net/maps2/srmap/color/nullimage.jpg",
				wikiUrl: "http://www.uesp.net/wiki/Skyrim:",
				iconPath: "icons/",
				zoomOffset : 9,
				initialGamePosX : 1000,
				initialGamePosY : 8000,
				initialZoom : 13,
				gamePosX1: -232000,
				gamePosX2: 290500,
				gamePosY1: 207000,
				gamePosY2: -315000
				//gamePosX1: -233472,
				//gamePosX2: 262144,
				//gamePosY1: 192512,
				//gamePosY2: -180224,
		};
		
		
		var g_DBMapOptions = {
				mapContainer : "#gmMap",
				getMapTileFunction : getDBMapTile,
				missingMapTile:  "http://content3.uesp.net/maps2/images/dboutofrange.jpg",
				iconPath: "icons/",
				wikiUrl: "http://www.uesp.net/wiki/Dragonborn:",
				zoomOffset : 8,
				initialGamePosX : 7000,
				initialGamePosY : 50000,
				initialZoom : 12,
				//gamePosX1: -170960,
				//gamePosX2: 323840,
				//gamePosY1: 512880,
				//gamePosY2: 2960,
				gamePosX1: -40960,
				gamePosX2: 163840,
				gamePosY1: 122880,
				gamePosY2: -40960,
		};

		$( document ).ready( function()
		{
			g_GameMap = new uesp.gamemap.Map("Skyrim", g_SRMapOptions, 1);
			g_GameMap.addWorld("Dragonborn", g_DBMapOptions, 2);
			
			g_GameMap.updateMapStateFromQuery(true);
		});

		function getSkyrimMapTile(xPos, yPos, zoom)
		{
			return "http://content3.uesp.net/maps2/srmap/color/zoom" + zoom + "/skyrim-" + xPos + "-" + yPos + "-" + zoom + ".jpg";
		}
		
		function getDBMapTile(xPos, yPos, zoom)
		{
			return "http://content3.uesp.net/maps2/dbmap/zoom" + zoom + "/solstheim-" + xPos + "-" + yPos + "-" + zoom + ".jpg";
		}

	</script>
</head>
<body>

Map Tiles...
<a href="#" onClick="g_GameMap.zoomOut();">Zoom Out</a>
<a href="#" onClick="g_GameMap.zoomIn();">Zoom In</a>
<a href="#" onClick="g_GameMap.setGamePos(2000, 7000);">Set Pos Test</a>
<a href="#" onClick="g_GameMap.setGameZoom(16);">Set Zoom Test</a>
<a href="#" onClick="g_GameMap.getGamePositionOfCenter();">Check Center Pos</a>
<a href="#" onClick="g_GameMap.getTilePositionOfCenter();">Check CenterTile Pos</a>
<a href="#" onClick="g_MapState = g_GameMap.getMapState();">Save State</a>
<a href="#" onClick="g_GameMap.setMapState(g_MapState);">Restore State</a>
<a href="#" onClick="g_GameMap.changeWorld('Skyrim');">Skyrim</a>
<a href="#" onClick="g_GameMap.changeWorld('Dragonborn');">Dragonborn</a>

<div id="gmMap">
</div>

<div id="gmMapDebug">Debug Div</div>
</body>
</html>
